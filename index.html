<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Game</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #1e1e1e;
            color: #00ffff;
        }
        h1 {
            color: #00ffff;
            text-shadow: 2px 2px 4px #000000;
        }
        #game-board {
            display: grid;
            grid-template-columns: repeat(auto-fill, 50px);
            gap: 5px;
            margin-bottom: 20px;
        }
        .tile {
            width: 50px;
            height: 50px;
            border: 2px solid #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            background-color: #1e1e1e;
            color: #ffffff;
        }
        .correct {
            background-color: green;
            color: white;
        }
        .present {
            background-color: orange;
            color: white;
        }
        .absent {
            background-color: gray;
            color: white;
        }
        .keyboard {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            margin-top: 20px;
            width: 100%;
            max-width: 400px;
        }
        .keyboard button {
            width: calc(10% - 10px);
            height: 40px;
            font-size: 1em;
            cursor: pointer;
            background-color: #1e1e1e;
            color: orange;
            border: 2px solid #333;
            flex: 1 0 18%;
            max-width: 40px;
        }
        .keyboard button:hover {
            background-color: #333;
        }
        .keyboard #enter, .keyboard #delete {
            flex: 1 0 36%;
            max-width: 80px;
        }
        #score {
            margin-top: 20px;
            font-size: 1.2em;
            color: #ffffff;
        }
        #word-length-selection, #game-mode-selection, #custom-word-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        #custom-word-container {
            display: none;
        }
        @media (max-width: 600px) {
            .tile {
                width: 40px;
                height: 40px;
                font-size: 1.2em;
            }
            .keyboard button {
                height: 35px;
                max-width: 35px;
                font-size: 0.9em;
            }
            .keyboard #enter, .keyboard #delete {
                max-width: 70px;
            }
        }
    </style>
</head>
<body>
    <h1>WORDLE</h1>
    <div id="word-length-selection">
        <p>Select word length:</p>
        <button onclick="startGame(3)">3 Letters</button>
        <button onclick="startGame(4)">4 Letters</button>
        <button onclick="startGame(5)">5 Letters</button>
    </div>
    <div id="game-mode-selection" style="display: none;">
        <p>Select game mode:</p>
        <button onclick="selectMode('predefined')">Predefined Words</button>
        <button onclick="selectMode('custom')">Enter Your Own Word</button>
    </div>
    <div id="custom-word-container">
        <p>Enter your word (3-5 letters):</p>
        <input type="text" id="custom-word-input" maxlength="5" />
        <button onclick="setCustomWord()">Start</button>
    </div>
    <div id="game-board"></div>
    <div class="keyboard">
        <button>A</button>
        <button>B</button>
        <button>C</button>
        <button>D</button>
        <button>E</button>
        <button>F</button>
        <button>G</button>
        <button>H</button>
        <button>I</button>
        <button>J</button>
        <button>K</button>
        <button>L</button>
        <button>M</button>
        <button>N</button>
        <button>O</button>
        <button>P</button>
        <button>Q</button>
        <button>R</button>
        <button>S</button>
        <button>T</button>
        <button>U</button>
        <button>V</button>
        <button>W</button>
        <button>X</button>
        <button>Y</button>
        <button>Z</button>
        <button id="enter">Enter</button>
        <button id="delete">←</button>
    </div>
    <div id="score">Score: 0</div>
    <script>
        const words = {
            3: ['cat', 'dog', 'sun', 'fun'],
            4: ['pear', 'door', 'moon', 'tree'],
            5: ['apple', 'bread', 'crane', 'drape', 'eagle']
        };
        let selectedWord = '';
        let wordLength = 5;
        const gameBoard = document.getElementById('game-board');
        const keyboardButtons = document.querySelectorAll('.keyboard button');
        const scoreElement = document.getElementById('score');
        const customWordContainer = document.getElementById('custom-word-container');
        const customWordInput = document.getElementById('custom-word-input');
        let score = 0;
        let currentRow = 0;
        let currentTile = 0;
        let rows = 6;
        let cols = 5;

        function startGame(length) {
            wordLength = length;
            cols = wordLength;
            currentRow = 0;
            currentTile = 0;
            document.getElementById('word-length-selection').style.display = 'none';
            document.getElementById('game-mode-selection').style.display = 'flex';
            gameBoard.innerHTML = '';
            createBoard();
        }

        function selectMode(mode) {
            if (mode === 'predefined') {
                selectedWord = words[wordLength][Math.floor(Math.random() * words[wordLength].length)].toUpperCase();
                document.getElementById('game-mode-selection').style.display = 'none';
            } else {
                customWordContainer.style.display = 'flex';
                document.getElementById('game-mode-selection').style.display = 'none';
            }
        }

        function setCustomWord() {
            const word = customWordInput.value.trim().toUpperCase();
            if (word.length >= 3 && word.length <= 5) {
                selectedWord = word;
                customWordContainer.style.display = 'none';
            } else {
                alert('Please enter a word between 3 and 5 letters.');
            }
        }

        function createBoard() {
            gameBoard.style.gridTemplateColumns = `repeat(${cols}, 50px)`;
            for (let i = 0; i < rows * cols; i++) {
                const tile = document.createElement('div');
                tile.classList.add('tile');
                gameBoard.appendChild(tile);
            }
        }

        function getCurrentRowTiles() {
            return [...gameBoard.children].slice(currentRow * cols, (currentRow + 1) * cols);
        }

        function updateTileStatus() {
            const currentTiles = getCurrentRowTiles();
            const guess = currentTiles.map(tile => tile.textContent).join('');

            const selectedWordArray = selectedWord.split('');
            const guessArray = guess.split('');

            guessArray.forEach((letter, index) => {
                if (letter === selectedWordArray[index]) {
                    currentTiles[index].classList.add('correct');
                    selectedWordArray[index] = null; // Remove this letter from consideration
                }
            });

            guessArray.forEach((letter, index) => {
                if (selectedWordArray.includes(letter) && !currentTiles[index].classList.contains('correct')) {
                    currentTiles[index].classList.add('present');
                    selectedWordArray[selectedWordArray.indexOf(letter)] = null; // Remove this letter from consideration
                } else if (!currentTiles[index].classList.contains('correct')) {
                    currentTiles[index].classList.add('absent');
                }
            });

            if (guess === selectedWord) {
                setTimeout(() => {
                    alert('Congratulations! You guessed the word!');
                    score += 10;
                    resetGame(false);
                }, 100);
            } else if (currentRow === rows - 1) {
                setTimeout(() => {
                    alert('Game Over! The word was: ' + selectedWord);
                    resetGame(true);
                }, 100);
            } else {
                currentRow++;
                currentTile = 0;
            }

            scoreElement.textContent = `Score: ${score}`;
        }

        function handleKeyClick(letter) {
            const currentTiles = getCurrentRowTiles();
            if (currentTile < cols) {
                currentTiles[currentTile].textContent = letter;
                currentTile++;
            }
        }

        function handleEnter() {
            if (currentTile === cols) {
                updateTileStatus();
            } else {
                alert('Please fill all the tiles.');
            }
        }

        function handleDelete() {
            if (currentTile > 0) {
                currentTile--;
                const currentTiles = getCurrentRowTiles();
                currentTiles[currentTile].textContent = '';
            }
        }

        function resetGame(failed) {
            if (failed) {
                score = 0;
            }
            currentRow = 0;
            currentTile = 0;
            gameBoard.innerHTML = '';
            if (failed) {
                document.getElementById('word-length-selection').style.display = 'flex';
                document.getElementById('game-mode-selection').style.display = 'none';
            } else {
                selectedWord = words[wordLength][Math.floor(Math.random() * words[wordLength].length)].toUpperCase();
            }
            scoreElement.textContent = `Score: ${score}`;
        }

        keyboardButtons.forEach(button => {
            button.addEventListener('click', () => {
                const letter = button.textContent;
                if (letter === 'Enter') {
                    handleEnter();
                } else if (letter === '←') {
                    handleDelete();
                } else {
                    handleKeyClick(letter);
                }
            });
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                handleEnter();
            } else if (e.key === 'Backspace' || e.key === 'Delete') {
                handleDelete();
            } else if (/^[a-zA-Z]$/.test(e.key)) {
                handleKeyClick(e.key.toUpperCase());
            }
        });

        createBoard();
    </script>
</body>
</html>
